<!-- UNIVERSAL IMAGE CONVERTER â€” Complete Blogger Version -->
<div style="font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;color:#222;">

  <!-- Static Header -->
  <header style="padding:18px 20px;border-bottom:1px solid rgba(0,0,0,0.06);text-align:center;">
    <h1 style="margin:0;font-size:1.8rem;">ðŸ“¸ Universal Image Converter</h1>
    <p style="margin:4px 0 0 0;color:rgba(0,0,0,0.6);font-size:0.9rem;">Fast Â· Simple Â· Smart</p>
  </header>

  <!-- Converter Container -->
  <div id="uic-container" style="max-width:900px;margin:30px auto;padding:15px;">

    <!-- Drag & Drop Area -->
    <div id="drop-area" style="
      border:2px dashed #ccc;border-radius:12px;padding:35px;text-align:center;
      cursor:pointer;transition:0.3s;position:relative;
    ">
      <p id="drop-text" style="margin:0;font-size:1.05rem;color:#555;">
        Drag & drop images here or click to select (multiple allowed)
      </p>
      <input type="file" id="fileElem" accept="image/*" multiple style="display:none;">
    </div>

    <!-- Preview Gallery -->
    <div id="preview-container" style="display:none;margin-top:20px;display:flex;flex-wrap:wrap;gap:12px;justify-content:center;"></div>

    <!-- Conversion Options -->
    <div style="margin-top:20px;display:none;" id="options-container">
      <label for="format-select" style="font-weight:600;">Select output format:</label>
      <select id="format-select" style="margin-left:10px;padding:6px;border-radius:5px;border:1px solid #ccc;">
        <option value="png">PNG</option>
        <option value="jpeg">JPEG</option>
        <option value="webp">WEBP</option>
        <option value="gif">GIF</option>
        <option value="pdf">PDF</option>
      </select>
      <br>
      <button id="convertBtn" style="
        margin-top:15px;padding:10px 20px;border:none;border-radius:6px;background:#28a745;color:white;
        font-weight:600;cursor:pointer;transition:0.2s;">Convert & Download All</button>
    </div>

  </div>
</div>

<script>
  const dropArea = document.getElementById('drop-area');
  const fileInput = document.getElementById('fileElem');
  const previewContainer = document.getElementById('preview-container');
  const optionsContainer = document.getElementById('options-container');
  const formatSelect = document.getElementById('format-select');
  const convertBtn = document.getElementById('convertBtn');

  let uploadedImages = []; // {img:Image, name:string}

  // Drag & Drop + Click
  dropArea.addEventListener('click', () => fileInput.click());
  dropArea.addEventListener('dragover', e => { e.preventDefault(); dropArea.style.borderColor='#007bff'; });
  dropArea.addEventListener('dragleave', e => { e.preventDefault(); dropArea.style.borderColor='#ccc'; });
  dropArea.addEventListener('drop', e => { e.preventDefault(); dropArea.style.borderColor='#ccc'; handleFiles(e.dataTransfer.files); });
  fileInput.addEventListener('change', e => handleFiles(e.target.files));

  function handleFiles(files) {
    if(files.length===0) return;
    for(let i=0;i<files.length;i++){
      const file = files[i];
      if(!file.type.startsWith('image/')) continue;
      const reader = new FileReader();
      reader.onload = function(e){
        const img = new Image();
        img.onload = function(){
          uploadedImages.push({img:img,name:file.name});
          updatePreview();
        }
        img.src = e.target.result;
      }
      reader.readAsDataURL(file);
    }
  }

  function updatePreview(){
    previewContainer.innerHTML='';
    uploadedImages.forEach((item,index)=>{
      const wrapper = document.createElement('div');
      wrapper.style.textAlign='center';
      wrapper.style.position='relative';
      wrapper.style.display='inline-block';

      const canvas = document.createElement('canvas');
      const ctx = canvas.getContext('2d');
      canvas.width = item.img.width>300?300:item.img.width;
      canvas.height = item.img.height*(canvas.width/item.img.width);
      ctx.drawImage(item.img,0,0,canvas.width,canvas.height);
      canvas.style.border='1px solid #ddd';
      canvas.style.borderRadius='8px';
      canvas.style.display='block';
      canvas.style.marginBottom='4px';

      // Filename label
      const label = document.createElement('div');
      label.style.fontSize='0.85rem';
      label.style.color='rgba(0,0,0,0.7)';
      label.style.maxWidth='300px';
      label.style.overflow='hidden';
      label.style.textOverflow='ellipsis';
      label.style.whiteSpace='nowrap';
      label.innerText = item.name;

      // Remove button
      const removeBtn = document.createElement('button');
      removeBtn.innerText='âœ–';
      removeBtn.style.position='absolute';
      removeBtn.style.top='4px';
      removeBtn.style.right='4px';
      removeBtn.style.border='none';
      removeBtn.style.background='rgba(0,0,0,0.5)';
      removeBtn.style.color='white';
      removeBtn.style.borderRadius='50%';
      removeBtn.style.width='20px';
      removeBtn.style.height='20px';
      removeBtn.style.cursor='pointer';
      removeBtn.addEventListener('click',()=>{
        uploadedImages.splice(index,1);
        updatePreview();
        if(uploadedImages.length===0) optionsContainer.style.display='none';
      });

      wrapper.appendChild(canvas);
      wrapper.appendChild(label);
      wrapper.appendChild(removeBtn);
      previewContainer.appendChild(wrapper);
    });
    previewContainer.style.display=uploadedImages.length>0?'flex':'none';
    optionsContainer.style.display=uploadedImages.length>0?'block':'none';
  }

  // Convert & Download All
  convertBtn.addEventListener('click', ()=>{
    if(uploadedImages.length===0) return;
    const format = formatSelect.value;
    uploadedImages.forEach((item,index)=>{
      const canvas = document.createElement('canvas');
      const ctx = canvas.getContext('2d');
      canvas.width = item.img.width>800?800:item.img.width;
      canvas.height = item.img.height*(canvas.width/item.img.width);
      ctx.drawImage(item.img,0,0,canvas.width,canvas.height);

      if(format==='pdf'){
        const link = document.createElement('a');
        link.href = canvas.toDataURL('image/png');
        link.download = item.name.replace(/\.[^/.]+$/,"") + '.png';
        link.click();
      } else {
        const link = document.createElement('a');
        link.href = canvas.toDataURL('image/'+format,0.9);
        link.download = item.name.replace(/\.[^/.]+$/,"") + '.'+format;
        link.click();
      }
    });
  });
</script>
